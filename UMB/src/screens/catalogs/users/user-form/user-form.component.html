<div fxLayout="column" style="padding: 1rem;">

    <div fxLayout="row" fxLayoutAlign="start center">
       
    </div>
</div><div fxLayout="column" style="padding: 1rem;">

    <div fxLayout="row" fxLayoutAlign="start center">
        <div fxLayout="column">
            <h3 class="style-title-child-page">{{title}} Alumno</h3>
        </div>  
    </div>

    <form [formGroup]="userForm">

        <div *ngIf="title==='Nuevo'" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="50px">
            <div fxFlex="50">
                <span>Correo</span>
            </div>
            <mat-form-field fxFlex="45">
                <input matInput autocomplete="off" required nonecomplete="off" type="email" formControlName="email" >
                <mat-error>
                    Correo electrónico <strong>requerido</strong>
                </mat-error>
                <mat-error *ngIf="domainValidator == false">
                    Correo electrónico debe ser de <strong>@umb.com.mx</strong>
                </mat-error>

            </mat-form-field>
        </div>

        <div *ngIf="title==='Nuevo'" autocomplete="off" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="50px">
            <div *ngIf="passwordRequired" fxFlex="50">
                <span>Contraseña</span>
            </div>
            <div *ngIf="!passwordRequired" fxFlex="50">
                <span>Nueva contraseña</span>
            </div>
            <mat-form-field fxFlex="45">
                <input matInput [type]="typePassword" autocomplete="off" formControlName="password" [required]="passwordRequired">
                <span class="material-icons eye" (click)="showPassword()">{{iconEye}}</span>
            </mat-form-field>
        </div>

        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="50px">
            <div fxFlex="50">
                <span>Nombre</span>
            </div>
            <mat-form-field fxFlex="45">
                <input matInput autocomplete="off" type="text" oninput="this.value = this.value.replace(/[^aA-zZñáÁéÉíÍóÓúÚ&\ ]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" formControlName="name">
            </mat-form-field>
        </div>

        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="50px">
            <div fxFlex="50">
                <span>Apellido</span>
            </div>
            <mat-form-field fxFlex="45">
                <input matInput autocomplete="off" type="text" oninput="this.value = this.value.replace(/[^aA-zZñáÁéÉíÍóÓúÚ&\ ]/g, ''); this.value = this.value.replace(/(\..*)\./g, '$1');" formControlName="last_name">
            </mat-form-field>
        </div>

        <div *ngIf="title==='Nuevo'" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="50px">
            <div fxFlex="50">
                <span>Fecha de nacimiento</span>
            </div>
            <mat-form-field fxFlex="45">
                <input matInput autocomplete="off" type="date" formControlName="birth_day">
            </mat-form-field>
        </div>

        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="50px">
            <div fxFlex="50">
                <span>Grupo</span>
            </div>
            <mat-form-field fxFlex="45">
                <mat-select matInput formControlName="group" matNativeControl>
                    <mat-option *ngFor="let option of data.groups" [value]="option.id">
                        {{option.data.group_name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
       

        <div *ngIf="title==='Nuevo'" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="50px">
            <div fxFlex="50">
                <span>Clase</span>
            </div>
            <mat-form-field fxFlex="45">
                <mat-select matInput formControlName="class" matNativeControl>
                    <mat-option *ngFor="let option of data.classes" [value]="option.id" (onSelectionChange)="loadInfoClass(option.id)">
                        {{option.id}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div *ngIf="Class.length > 0">
            <h3>Informacion de la clase</h3>
            <table class="table">
                <thead>
                  <tr>
                    <th>Materia</th>
                    <th>Maestro</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let grade of Class">
                    <td>{{ grade.class_name }}</td>
                    <td>{{ grade.teacher_name + ' '+ grade.teacher_lastname}}</td>
                  </tr>
                </tbody>
              </table>
              <h3>Horario</h3>
              <table class="table">
                  <thead>
                    <tr>
                      <th>Lunes</th>
                      <th>Martes</th>
                      <th>Miercoles</th>
                      <th>Jueves</th>
                      <th>Viernes</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let grade of Class">
                      <td>{{ grade.monday }}</td>
                      <td>{{ grade.tuesday }}</td>
                      <td>{{ grade.wednesday }}</td>
                      <td>{{ grade.thursday }}</td>
                      <td>{{ grade.friday }}</td>
                    </tr>
                  </tbody>
                </table>
          </div>

        <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="50px">
            <div fxFlex="50">
                <span>Telefono</span>
            </div>
            <mat-form-field fxFlex="45">
                <input matInput autocomplete="off" type="text" formControlName="phone">
            </mat-form-field>
        </div>
    </form>

    

    <div fxLayout="row" fxLayoutAlign="space-evenly center">
        <div>
            <button mat-raised-button class="style-button-cancel" fxFlex (click)="dialogRef.close('cancel')">
        Cancelar
      </button>
        </div>
        <div>
            <!-- <button mat-raised-button (click)="addOrUpdate()" class="style-raised-button" fxFlex [disabled]="userForm.invalid || domainValidator == false || selectedPlants.length === 0 || plantDefautlFormContrl.value === ''">
                {{this.data.userData !== undefined ? 'Actualizar' : 'Guardar' }}
            </button> -->
            <button mat-raised-button class="style-raised-button" (click)="registerOrUpdate()">
                {{this.data.userData !== undefined ? 'Actualizar' : 'Guardar' }}
            </button>
        </div>
    </div>
</div>