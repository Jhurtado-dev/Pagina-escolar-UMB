<div fxLayout="column" style="width: 100%;" class="general-padding-1" fxLayoutGap="1vw">

    <div fxLayout="row" fxLayoutAlign="space-between center">
        <div xLayout="column" fxFlex="50">
            <div fxLayout="row" fxLayoutAlign="start center">
                <div style="padding-right: 1vw;">
                    <h3 class="style-title-child-page">Usuarios</h3>
                </div>
                <button mat-mini-fab (click)="openFormDialog()" matTooltipClass="tooltip" matTooltipPosition="above" class="style-button-add-icon" [disabled]="this.sessionModel.user.data.id_role != 1">
          <mat-icon>add</mat-icon>
        </button>
            </div>
        </div>

        <div fxLayout="row" fxLayoutAlign="end center" fxLayoutGap="1vw">
            <div style="padding-bottom: 1vw;">
                <button mat-icon-button (click)="print()" class="btn-flotante">
                <mat-icon>print</mat-icon>
              </button>
            </div>
            <mat-form-field appearance="outline">
                <mat-label>Buscar usuario</mat-label>
                <input type="text" matInput autocomplete="off" placeholder="Buscar usuario" (keyup)="filter($event.target.value)">
                <mat-icon matPrefix>search</mat-icon>
            </mat-form-field>
        </div>

    </div>

    <div fxLayout="row" fxFlex="100" fxLayoutAlign="space-between start">
        <div fxLayout="column" fxFlex="100" class="table-scroll-x">
            <table id="customers" mat-table [dataSource]="dataSource">

                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef><span fxLayoutAlign="start">ID</span></th>
                    <td mat-cell *matCellDef="let element"><span fxLayoutAlign="start">{{element.id}}</span></td>
                </ng-container>

                <!--<ng-container matColumnDef="plants">
                    <th mat-header-cell *matHeaderCellDef><span fxLayoutAlign="start">Nombre de la planta(s)</span></th>
                    <td mat-cell *matCellDef="let element"><span fxLayoutAlign="start">{{ element.data.plantsString }}</span>
                    </td>
                </ng-container>-->

                <ng-container matColumnDef="plantId">
                    <th mat-header-cell *matHeaderCellDef><span fxLayoutAlign="start">Nombre de la planta</span></th>
                    <td mat-cell *matCellDef="let element"><span fxLayoutAlign="start">{{ element.data.id_plant }}</span>
                    </td>
                </ng-container>

                <ng-container matColumnDef="user">
                    <th mat-header-cell *matHeaderCellDef><span fxLayoutAlign="start"></span>Usuario</th>
                    <td mat-cell *matCellDef="let element"><span fxLayoutAlign="start">{{element.data.user_name}}</span></td>
                </ng-container>

                <ng-container matColumnDef="name">
                    <th mat-header-cell *matHeaderCellDef><span fxLayoutAlign="start"></span>Nombre completo</th>
                    <td mat-cell *matCellDef="let element"><span fxLayoutAlign="start">{{element.data.name}}</span></td>
                </ng-container>

                <ng-container matColumnDef="role">
                    <th mat-header-cell *matHeaderCellDef><span fxLayoutAlign="start"></span>Rol</th>
                    <td mat-cell *matCellDef="let element"><span fxLayoutAlign="start">{{ element.data.role }}</span></td>
                </ng-container>

                <ng-container matColumnDef="email">
                    <th mat-header-cell *matHeaderCellDef><span fxLayoutAlign="start"></span>Correo</th>
                    <td mat-cell *matCellDef="let element"><span fxLayoutAlign="start">{{ element.data.email }}</span></td>
                </ng-container>

                <ng-container matColumnDef="edit">
                    <th mat-header-cell *matHeaderCellDef><span fxLayoutAlign="center">Editar</span></th>
                    <td mat-cell *matCellDef="let element">
                        <span fxLayoutAlign="center">
              <button mat-button (click)="openFormDialog(element)"
                [disabled]="this.sessionModel.user.data.id_role != 1">
                <mat-icon>create</mat-icon>
              </button>
            </span>
                    </td>
                </ng-container>

                <ng-container matColumnDef="delete">
                    <th mat-header-cell *matHeaderCellDef><span fxLayoutAlign="center">Eliminar</span></th>
                    <td mat-cell *matCellDef="let element">
                        <span fxLayoutAlign="center">
              <button mat-button (click)="deleteRow(element)" [disabled]="this.sessionModel.user.data.id_role != 1">
                <mat-icon>delete</mat-icon>
              </button>
            </span>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

            </table>
            <mat-paginator [pageSizeOptions]="[5, 10, 25]" showFirstLastButtons></mat-paginator>
        </div>

    </div>
</div>